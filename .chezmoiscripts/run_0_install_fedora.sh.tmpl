{{- if (and (eq .chezmoi.os "linux") (eq .chezmoi.osRelease.id "fedora")) -}}
#!/bin/bash

{{- $packages := list
    "containerd.io"
    "dnf-plugins-core"
    "docker-buildx-plugin"
    "docker-ce"
    "docker-ce-cli"
    "docker-compose-plugin"
    "gcc"
    "gcc-c++"
    "icu"
    "jq"
    "libicu"
    "zsh"
}}

# Add docker repository
{{ .sudo -}}dnf config-manager --add-repo https://download.docker.com/linux/fedora/docker-ce.repo

{{ .sudo -}}dnf upgrade -y
{{ .sudo -}}dnf install -y {{ $packages | join " " }}

{{ .sudo -}}systemctl enable --now docker.service

{{- end }}
